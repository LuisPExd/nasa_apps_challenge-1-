<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASA Space Apps Challenge: Cleaner, Safer Skies</title>
    
    <!-- Tailwind CSS para el dashboard -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Librerías de Visualización y Estilos -->
    <link rel="stylesheet" href="styles.css">        <!-- Dashboard styles (Optimizado) -->
    <link rel="stylesheet" href="css/layout.css">    <!-- Landing page styles (Actualizado) -->
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Librerías JS para el dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.umd.min.js"></script>
</head>

<body>
    <!-- HEADER Y NAVEGACIÓN (Sticky Nav) -->
    <header id="main-header" class="header-initial">
        <nav class="nav-menu">
            <a href="#hero-section" class="nav-link">HOME</a>
            <a href="#air-quality-intro" class="nav-link">AQI INFO</a>
            <a href="#air-quality-dashboard" class="nav-link">DASHBOARD</a>
            <a href="#about-us-section" class="nav-link">ABOUT</a>
            <a href="#project-importance" class="nav-link">IMPORTANCE</a>
            <a href="#core-values-section" class="nav-link">VALUES</a>
            <a href="#sdg-alignment-section" class="nav-link">SDGs</a>
        </nav>
    </header>

    <!-- SECCIONES DEL INDEX 1 -->
    <section id="hero-section" class="full-screen-section overlay scroll-snap-start">
        <div id="carousel-container" class="carousel-container">
            <div class="slide current-slide" data-index="0"></div>
            <div class="slide" data-index="1"></div>
            <div class="slide" data-index="2"></div>
            <div class="slide" data-index="3"></div>
        </div>

        <div class="hero-content">
            <h1 class="team-name">SYLPHA</h1>
            <p class="team-description">PREDICTING AIR, PROTECTING LIFE</p>

            <div class="carousel-indicators">
                <span class="indicator" data-slide-to="0"></span>
                <span class="indicator" data-slide-to="1"></span>
                <span class="indicator" data-slide-to="2"></span>
                <span class="indicator" data-slide-to="3"></span>
            </div>

            <a href="#about-us-section" class="scroll-indicator" title="Scroll down">
                <i class="material-icons scroll-arrow">keyboard_arrow_down</i>
            </a>
        </div>
    </section>

    <!-- ABOUT US (Sección 2) -->
    <section id="about-us-section" class="content-section scroll-snap-start">
        <div class="about-us-container">
            <h1 class="section-title-large">ABOUT US</h1>
            <div class="about-content">
                <p>We are a collective of Mechanical-Electrical Engineering students united by the conviction that technological innovation must transcend academic boundaries and become a catalyst for societal progress and environmental stewardship. Our rigorous training enables us to comprehend and model complex systems, while our commitment to sustainability drives us to translate scientific knowledge into solutions with tangible impact.</p>
                <p>Our work centers on the integration of satellite observations, ground-based measurements, and meteorological data, transforming these diverse inputs into reliable, accessible, and actionable intelligence for informed decision-making. Through this approach, we aim to strengthen public health protection, empower vulnerable communities disproportionately affected by pollution, and contribute to the creation of a resilient and sustainable future.</p>
                <p>We uphold purpose-driven science, ethical innovation, and interdisciplinary collaboration as the guiding principles of our mission, convinced that addressing the environmental challenges of our era requires not only advanced technical expertise but also a profound sense of responsibility towards humanity and the planet.</p>
            </div>
        </div>
    </section>

    <!-- IMPORTANCE OF THE PROJECT (Sección 3) -->
    <section id="project-importance" class="content-section scroll-snap-start"> 
        <div class="importance-container">
            <div class="importance-text">
                <h2>Importance of our Project</h2>
                <p>Air pollution has emerged as one of the most pressing global health threats of the 21st century, with the World Health Organization estimating that 99% of the world's population breathes air exceeding safe pollution limits (NASA, 2025). The consequences are not merely environmental but profoundly human, disproportionately affecting vulnerable populations such as children, the elderly, and individuals with pre-existing health conditions.</p>
                <p>Our project addresses this challenge by providing a comprehensive forecasting tool that integrates satellite observations, ground-based sensors, and meteorological dynamics into a single, accessible platform. The significance lies in its ability to transform complex scientific data into actionable insights, enabling individuals, institutions, and policymakers to anticipate risks, reduce exposure, and adopt evidence-based strategies for safeguarding public health.</p>
                <p>Beyond immediate health protection, our work contributes to long-term environmental awareness and resilience, fostering a culture of informed decision-making that bridges the gap between advanced space technology and everyday human wellbeing. By merging technological rigor with social responsibility, our project exemplifies how engineering innovation can actively shape healthier, more sustainable communities.</p>
            </div>

            <div class="importance-images">
                <div class="image-stack">
                    <!-- Estas imágenes usan rutas predefinidas en el HTML -->
                    <img src="img/image1.png" alt="Earth Data Visualization 1" class="img-1">
                    <img src="img/image2.png" alt="Earth Data Visualization 2" class="img-2">
                    <img src="img/image3.png" alt="Earth Data Visualization 3" class="img-3">
                    <img src="img/image4.png" alt="Earth Data Visualization 4" class="img-4">
                </div>
            </div>
        </div>
    </section>
    
    <!-- CORE VALUES (Sección 4) -->
    <section id="core-values-section" class="content-section scroll-snap-start">
        <div class="values-container">
            <h1 class="section-title-large">OUR CORE VALUES</h1>
            <div class="values-list">
                <div class="value-item">
                    <h3>1. Scientific Integrity</h3>
                    <p>We uphold the highest standards of rigor, transparency, and accountability in every stage of our work, ensuring that our outcomes are both credible and reproducible.</p>
                </div>
                <div class="value-item">
                    <h3>2. Innovation with Purpose</h3>
                    <p>We harness cutting-edge technologies not for novelty's sake, but to generate solutions that directly improve human wellbeing and environmental sustainability.</p>
                </div>
                <div class="value-item">
                    <h3>3. Social Responsibility</h3>
                    <p>We recognize the disproportionate impact of air pollution on vulnerable populations and commit to developing tools that empower communities and protect public health.</p>
                </div>
                <div class="value-item">
                    <h3>4. Collaboration and Diversity</h3>
                    <p>We value interdisciplinary cooperation and inclusive perspectives, understanding that global challenges require collective intelligence and shared responsibility.</p>
                </div>
                <div class="value-item">
                    <h3>5. Sustainability</h3>
                    <p>We design our initiatives to align with long-term ecological resilience, advancing not only immediate benefits but also enduring environmental balance.</p>
                </div>
                <div class="value-item">
                    <h3>6. Empowerment Through Education</h3>
                    <p>We transform complex scientific insights into accessible knowledge, empowering individuals and communities to make informed choices for their health and environment.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- SDG ALIGNMENT (Sección 5) -->
    <section id="sdg-alignment-section" class="content-section scroll-snap-start">
        <div class="sdg-container">
            <h1 class="section-title-large">ALIGNMENT WITH UN SUSTAINABLE DEVELOPMENT GOALS (SDGs)</h1>
            <p class="sdg-intro">Our project directly contributes to several United Nations SDGs, transforming data into action for a sustainable future:</p>
            <div class="sdg-list">
                <div class="sdg-item sdg-3">
                    <h3>SDG 3: Good Health and Well-Being</h3>
                    <p>By forecasting air quality and reducing exposure to pollutants, we protect vulnerable populations and promote healthier communities.</p>
                </div>
                <div class="sdg-item sdg-11">
                    <h3>SDG 11: Sustainable Cities and Communities</h3>
                    <p>Our platform empowers local authorities and citizens to make informed decisions that enhance urban resilience against environmental hazards.</p>
                </div>
                <div class="sdg-item sdg-13">
                    <h3>SDG 13: Climate Action</h3>
                    <p>By leveraging data-driven insights, we contribute to the global effort of understanding and mitigating the impacts of climate-related phenomena on air quality.</p>
                </div>
                <div class="sdg-item sdg-17">
                    <h3>SDG 17: Partnerships for the Goals</h3>
                    <p>Our work embodies collaboration, integrating data from satellites, ground stations, and meteorological services, and fostering partnerships across disciplines.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCIÓN: INFOGRAFÍA INTERACTIVA DEL AQI -->
    <section id="air-quality-intro" class="content-section scroll-snap-start bg-gray-50">
        <div class="aqi-intro-container">
            <h1 class="section-title-large !text-sky-blue-dark">AIR QUALITY INDEX (AQI)</h1>
            <p class="aqi-intro-text">
                The AQI is the key tool for reporting daily air conditions, indicating whether the air is clean or polluted and the potential health effects that might arise. (U.S. EPA, 2014)
            </p>

            <!-- CONTENEDOR PRINCIPAL: AQI Y CONTAMINANTES -->
            <div class="aqi-grid">
                <!-- Columna 1: Escala del AQI -->
                <div class="aqi-scale-card">
                    <h2 class="aqi-scale-title">Air Quality Index </h2>
                    <div class="aqi-scale">
                        <!-- Nivel: Good (0-50) -->
                        <div class="aqi-level aqi-good">
                            <span class="aqi-range">0 - 50</span>
                            <span class="aqi-category">Good</span>
                        </div>
                        <!-- Nivel: Moderate (51-100) -->
                        <div class="aqi-level aqi-moderate">
                            <span class="aqi-range">51 - 100</span>
                            <span class="aqi-category">Moderate</span>
                        </div>
                        <!-- Nivel: Unhealthy for SG (101-150) -->
                        <div class="aqi-level aqi-unhealthy-sg">
                            <span class="aqi-range">101 - 150</span>
                            <span class="aqi-category">Unhealthy for Sensitive Groups</span>
                        </div>
                        <!-- Nivel: Unhealthy (151-200) -->
                        <div class="aqi-level aqi-unhealthy">
                            <span class="aqi-range">151 - 200</span>
                            <span class="aqi-category">Unhealthy</span>
                        </div>
                        <!-- Nivel: Very Unhealthy (201-300) -->
                        <div class="aqi-level aqi-very-unhealthy">
                            <span class="aqi-range">201 - 300</span>
                            <span class="aqi-category">Very Unhealthy</span>
                        </div>
                        <!-- Nivel: Hazardous (301-500) -->
                        <div class="aqi-level aqi-hazardous">
                            <span class="aqi-range">301 - 500</span>
                            <span class="aqi-category">Hazardous</span>
                        </div>
                    </div>
                    <p class="aqi-citation"> Source: Adapted from U.S. EPA </p>
                </div>

                <!-- Columna 2: Contaminantes Clave (Interactivos) -->
                <div class="pollutant-cards-container">
                    <h2 class="aqi-scale-title">Key AQI Pollutants</h2>
                    <p class="text-sm text-gray-500 mb-4 text-center">Click to see health risks.</p>
                    <div id="pollutant-cards" class="pollutant-cards">
                        <!-- Tarjeta 1: O3 -->
                        <button class="pollutant-card" data-pollutant="O3">
                            <i class="material-icons text-4xl text-sky-blue">blur_on</i>
                            <span class="pollutant-name">Ozone (O3)</span>
                        </button>
                        <!-- Tarjeta 2: PM2.5 -->
                        <button class="pollutant-card" data-pollutant="PM2.5">
                            <i class="material-icons text-4xl text-sky-blue">grain</i>
                            <span class="pollutant-name">PM2.5</span>
                        </button>
                        <!-- Tarjeta 3: PM10 -->
                        <button class="pollutant-card" data-pollutant="PM10">
                            <i class="material-icons text-4xl text-sky-blue">filter_drama</i>
                            <span class="pollutant-name">PM10</span>
                        </button>
                        <!-- Tarjeta 4: NO2 -->
                        <button class="pollutant-card" data-pollutant="NO2">
                            <i class="material-icons text-4xl text-sky-blue">local_gas_station</i>
                            <span class="pollutant-name">Nitrogen Dioxide (NO2)</span>
                        </button>
                        <!-- Tarjeta 5: CO -->
                        <button class="pollutant-card" data-pollutant="CO">
                            <i class="material-icons text-4xl text-sky-blue">directions_car</i>
                            <span class="pollutant-name">Carbon Monoxide (CO)</span>
                        </button>
                    </div>
                    <!-- MODAL o Área de Información Detallada (inicialmente oculta) -->
                    <div id="pollutant-info-box" class="info-box hidden">
                        <h3 id="info-box-title" class="info-box-title"></h3>
                        <p id="info-box-risk" class="info-box-risk"></p>
                        <p id="info-box-citation" class="info-box-citation">Source: South Coast AQMD (2016)</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCIÓN: AQI MAP BY LOCATION -->
   <section id="location-aqi-map-section" class="mt-8 flex justify-center scroll-snap-start">
    <div class="w-full md:w-11/12 lg:w-5/6 xl:w-5/6">

        <div class="border border-gray-300 rounded-2xl overflow-hidden shadow-lg">
        <iframe
            id="aqi-location-map-frame"
            src="map_location.html"
            title="AQI by Location Map"
            width="100%"
            height="650"
            style="border:0; border-radius: 0.75rem;"
            loading="lazy"
            allowfullscreen>
        </iframe>
        </div>

    </div>
    </section>


   <section id="location-aqi-ranking" class="mt-8 flex justify-center scroll-snap-start">
    <div class="w-full md:w-11/12 lg:w-5/6 xl:w-5/6">

        <div class="border border-gray-300 rounded-2xl overflow-hidden shadow-lg">
        <iframe
            id="aqi-location-map-frame"
            src="ranking.html"
            title="AQI by Location Map"
            width="100%"
            height="650"
            style="border:0; border-radius: 0.75rem;"
            loading="lazy"
            allowfullscreen>
        </iframe>
        </div>

    </div>
    </section>


    <!-- AIR QUALITY DASHBOARD (ENGLISH VERSION) -->
    <section id="air-quality-dashboard" class="content-section scroll-snap-start">
        <div class="bg-gray-50 p-4">
            <!-- Dashboard Header -->
            <header class="text-center pt-4 pb-4">
                <h1 class="text-3xl font-extrabold text-gray-900">
                    <span class="text-step">OpenAQ</span> Dashboard
                </h1>
                <p class="text-gray-500 mt-1 text-sm"> Real-time and historical air quality data analysis. </p>
            </header>

            <!-- Application Container: Controls and Results -->
            <div class="app-layout">
                
                <!-- Left Column: Controls and Selections -->
                <div id="selection-controls" class="control-panel">
                    
                    <h2 class="text-lg font-bold mb-4 text-gray-700">Data Options</h2>
                    
                    <!-- GROUP 1: Location -->
                    <div class="space-y-4 mb-4">
                        <p class="section-title">1. Location</p>
                        
                        <!-- 1. Country Selection -->
                        <div class="control-group">
                            <label for="country-select" class="control-label">Country</label>
                            <select id="country-select" class="input-field" disabled>
                                <option value="" disabled selected>Loading countries...</option>
                            </select>
                            <p id="country-feedback" class="error-feedback hidden"></p>
                        </div>

                        <!-- 2. Station Selection -->
                        <div class="control-group">
                            <label for="station-select" class="control-label">Monitoring Station</label>
                            <select id="station-select" class="input-field" disabled>
                                <option value="" disabled selected>Waiting for country...</option>
                            </select>
                            <p id="station-feedback" class="error-feedback hidden"></p>
                        </div>
                    </div>

                    <!-- GROUP 2: Sensor and Time Range -->
                    <div class="space-y-4 mb-4">
                        <p class="section-title">2. Parameter and Time</p>
                        
                        <!-- 3. Sensor Selection -->
                        <div class="control-group">
                            <div class="control-group relative">
                                <div class="flex items-center justify-between">
                                    <label for="sensor-select" class="control-label">Sensor / Parameter</label>
                                    <!-- Tooltip icon -->
                                    <div class="relative group cursor-pointer">
                                        <svg class="w-5 h-5 text-indigo-600 hover:text-indigo-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"/>
                                        </svg>
                                        <!-- Tooltip text -->
                                        <div id="sensor-tooltip" class="absolute right-0 top-6 w-56 bg-white border border-gray-200 rounded-lg shadow-md p-3 text-sm text-gray-700 hidden group-hover:block z-50">
                                            Select a parameter to see its description.
                                        </div>
                                    </div>
                                </div>
                                <select id="sensor-select" class="input-field mt-1" disabled>
                                    <option value="" disabled selected>Waiting for station...</option>
                                </select>
                                <p id="sensor-feedback" class="error-feedback hidden"></p>
                            </div>
                        </div>
                        
                        <!-- Granularity (Aggregation) -->
                        <div class="control-group">
                            <label for="agg-select" class="control-label">Granularity</label>
                            <select id="agg-select" class="input-field">
                                <option value="raw">Raw data (last 1000)</option>
                                <option value="hours">Hourly averages</option>
                                <option value="days" selected>Daily averages</option>
                                <option value="monthly">Monthly averages</option>
                                <option value="yearly">Yearly averages</option>
                            </select>
                        </div>

                        <!-- Dates -->
                        <div class="grid grid-cols-2 gap-3">
                            <div class="control-group">
                                <label for="date-from" class="control-label">Start Date</label>
                                <input type="date" id="date-from" class="input-field" disabled>
                            </div>
                            <div class="control-group">
                                <label for="date-to" class="control-label">End Date</label>
                                <input type="date" id="date-to" class="input-field" disabled>
                                <p id="date-to-max" class="text-xs text-gray-500 mt-1 text-right">Max: -</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- GROUP 3: Action Buttons -->
                    <div class="flex flex-col space-y-2 pt-2">
                        <button id="btn-history" class="btn btn-primary" disabled>Load History</button>
                        <button id="btn-latest" class="btn btn-secondary" disabled>Update Latest Measurement</button>
                    </div>
                    
                    <!-- JSON Debug -->
                    <div class="debug-panel hidden" id="json-debug-container">
                        <h3 class="font-medium text-gray-700 cursor-pointer" onclick="document.getElementById('json-content').classList.toggle('hidden')">
                            JSON Metadata <span class="text-xs text-gray-500">(Click to view)</span>
                        </h3>
                        <pre id="json-content" class="json-pre hidden"></pre>
                    </div>
                </div>

                <!-- Right Column: Results and Charts -->
                <div id="results-area" class="results-panel">
                    
                    <!-- 1. Latest Measurement -->
                    <div id="latest-result" class="latest-result-card">
                        <p class="text-sm font-semibold text-gray-700 mb-1">LATEST MEASUREMENT</p>
                        <p id="latest-value" class="text-3xl font-extrabold text-indigo-600">--</p>
                        <p id="latest-datetime" class="text-xs text-gray-500 mt-1">Select a sensor to load data</p>
                    </div>

                    <!-- 2. Historical Chart -->
                    <div id="history-chart-card" class="card chart-card">
                        <h3 id="chart-title" class="text-lg font-semibold text-gray-700 mb-4">Measurement History</h3>
                        
                        <!-- Chart Placeholder / Preload -->
                        <div id="chart-placeholder" class="text-center p-8 flex flex-col items-center justify-center h-full">
                            <svg class="w-10 h-10 text-indigo-400 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l2 2 4-4M3 12a9 9 0 1118 0 9 9 0 01-18 0z"></path></svg>
                            <p id="placeholder-text" class="text-gray-500 font-medium"> Select a parameter and click "Load History". </p>
                        </div>

                        <div class="relative w-full chart-wrapper hidden">
                            <canvas id="history-chart"></canvas>
                        </div>
                        
                        <!-- Button to View Detailed Data (Table) -->
                        <div class="mt-3 text-center hidden" id="toggle-table-container">
                             <button id="btn-toggle-table" class="btn btn-tertiary text-sm">
                                Show Data Table
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal for Data Table -->
            <div id="history-modal" class="modal-overlay hidden">
                <div class="modal-content">
                    <div class="flex justify-between items-center pb-3 border-b border-gray-200">
                         <h3 class="text-lg font-semibold text-gray-800">Historical Data Table</h3>
                         <button id="btn-close-modal" class="text-gray-400 hover:text-gray-600 focus:outline-none">
                             <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                         </button>
                    </div>
                    
                    <div class="mt-4 overflow-y-auto max-h-96">
                         <table class="min-w-full divide-y divide-gray-200">
                            <thead class="table-header sticky top-0 z-10">
                                <tr>
                                    <th class="table-header-cell">Date (UTC)</th>
                                    <th class="table-header-cell">Value</th>
                                    <th class="table-header-cell">Unit</th>
                                </tr>
                            </thead>
                            <tbody id="history-table-body" class="bg-white divide-y divide-gray-200">
                                <!-- Data rows here -->
                            </tbody>
                        </table>
                    </div>
                    <p id="table-info" class="text-xs text-gray-500 mt-3 text-center hidden">Only the first 500 data points are displayed in the table.</p>
                </div>
            </div>

            <!-- Loading / Error Messages -->
            <div id="loading" class="text-center p-6 card absolute-status hidden">
                <div class="spinner"></div>
                <p id="loading-text" class="text-gray-600 mt-3"></p>
            </div>
            
            <div id="error-message" class="error-box absolute-status hidden" role="alert">
                <p class="font-bold">Request Error:</p>
                <p id="error-text"></p>
            </div>
        </div>
    </section>


    <section id="location-aqi-predictions" class="mt-8 flex justify-center scroll-snap-start">
    <div class="w-full md:w-11/12 lg:w-5/6 xl:w-5/6">

        <div class="border border-gray-300 rounded-2xl overflow-hidden shadow-lg">
        <iframe
            id="aqi-location-map-frame"
            src="predicciones.html"
            title="Predictions"
            width="100%"
            height="650"
            style="border:0; border-radius: 0.75rem;"
            loading="lazy"
            allowfullscreen>
        </iframe>
        </div>

    </div>
    </section>

    <!-- SCRIPTS -->
    <script type="module" src="app.js"></script>
    <script type="module" src="js/scripts.js"></script>
</body>
</html>